<!DOCTYPE html>

<html>

    <head>
        <link rel="stylesheet" type="text/css" href="../css/tiledb.css">
        <link href='https://fonts.googleapis.com/css?family=Roboto|Open+Sans|Source+Sans+Pro|Lora|Raleway' rel='stylesheet' type='text/css'>
        <script>document.domain = document.domain;</script>
    </head>

    <body>
        
        <div class="tutorial-main">
            
            <h1>TileDB C API</h1>
            
            <p>
                All the code examples provided in this tutorial can be found in the TileDB github repo under directory "examples/src/", and their 
                binaries are created in "examples/bin/debug" or "examples/bin/release", depending on the mode they are compiled. For simplicity and
                brevity, the examples are written in C++.
            </p>
            
            <h2><a name="version">Version</a></h2>
                
            <p class=api-declaration>
                <b>#define</b> TILEDB_VERSION "0.1"
            </p>
            
            <h2><a name="constants">Constants</a></h2>
            
            <p>
                General return codes:
            </p>
                
            <p class=api-declaration>
                <b>#define</b> TILEDB_OK  &nbsp;  &ensp;   0    <br>
                <b>#define</b> TILEDB_ERR         &ensp;  -1
            </p>
            
            <p>
                Return codes for reading:
            </p>
                
            <p class=api-declaration>
                <b>#define</b> TILEDB_READ_BUFFER_OVERFLOW  &nbsp;  &ensp;   -2
            </p>
            
            <p>
                Array modes:
            </p>
                
            <p class=api-declaration>
                <b>#define</b> TILEDB_ARRAY_MODE_READ  &nbsp;&ensp;   1    <br>
                <b>#define</b> TILEDB_ARRAY_MODE_WRITE &ensp;         2
            </p>
            
            <p>
                Metadata modes:
            </p>
                
            <p class=api-declaration>
                <b>#define</b> TILEDB_METADATA_MODE_READ  &nbsp;&ensp;   1    <br>
                <b>#define</b> TILEDB_METADATA_MODE_WRITE &nbsp;         2
            </p>
                
            <h2><a name="context">TileDB Context</a></h2>
                
            <p class=api-declaration>
                <b>typedef struct</b> TileDB_CTX TileDB_CTX;
            </p>
            
            <p class="api-explanation">
                The TileDB context encapsulates the various TileDB modules, and constitutes the state maintained throughout
                the subsequent TileDB C API calls. The user must initialize a TileDB context prior to using any other TileDB 
                C API (via <span class="code-font">tiledb_ctx_init</span>), and always finalize it before terminating the program 
                (via <span class="code-font">tiledb_ctx_finalize</span>).
            </p>

            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_ctx_init(TileDB_CTX** tiledb_ctx);
            </p>
                
            <p class="api-explanation">
                Initializes a TileDB context. This function should always be called before invoking any other TileDB
                C API function.
            </p>

                
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_ctx_finalize(TileDB_CTX* tiledb_ctx);
            </p>
            
            <p class="api-explanation">
                Finalizes the TileDB context, safely cleaning the maintained state. This function should always be called
                prior to terminating the program.
            </p>
                                
            <p class="code-block">
                <span class="code-comment">
                     /* Initializing/finalizing a TileDB context. */                              <br>
                </span>                                                                           
                                                                                                  <br>
                <b>#include</b> "tiledb.h"                                                        <br>
                                                                                                  <br>
                <b>int</b> main() {                                                               <br>
                                                                                                  <br>
                &nbsp;&nbsp;<span class="code-comment">/* Initialize context */</span>           <br>
                &nbsp;&nbsp;TileDB_CTX* tiledb_ctx;                                              <br>
                &nbsp;&nbsp;tiledb_ctx_init(&amp;tiledb_ctx);                                    <br>
                                                                                                  <br>
                &nbsp;&nbsp;<span class="code-comment">/* YOUR CODE HERE */</span>               <br>
                                                                                                  <br>
                &nbsp;&nbsp;<span class="code-comment">/* Finalize context */</span>             <br>
                &nbsp;&nbsp;tiledb_ctx_finalize(tiledb_ctx);                                     <br>
                                                                                                  <br>
                &nbsp;&nbsp;<b>return</b> 0;                                                     <br>
                }
            </p>
                
            <h2><a name="workspaces">Workspaces</a></h2>
            
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_workspace_create(                                 <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_CTX* tiledb_ctx,                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> workspace,                            <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> master_catalog);
            </p>
            
            <p class="api-explanation">
                Creates a new TileDB workspace. Input <span class="code-font">tiledb_ctx</span> 
                is the TileDB context. Input <span class="code-font">workspace</span> is the
                path to the directory in the file system that will represent the workspace. Input
                <span class="code-font">master_catalog</span> is the path to the directory that
                will represent the master catalog, which stores information about all existing TileDB
                workspaces. If the master catalog does not exist, it will be created. On success, the
                function returns <span class="code-font">TILEDB_OK</span>; on failure, it returns 
                <span class="code-font">TILEDB_ERR</span>.
            </p>
            
            <p class="code-block">
                <span class="code-comment"> 
                     /*                                                                          <br>
                     &nbsp;* File: <b>tiledb_workspace_create.cc</b>                             <br>
                     &nbsp;*                                                                     <br>
                     &nbsp;* Creating a TileDB workspace.                                        <br>
                     &nbsp;*/                                                                    <br>
                </span>
                                                                                                  <br>
                <b>#include</b> "tiledb.h"                                                        <br>
                                                                                                  <br>
                <b>int</b> main() {                                                               <br>
                                                                                                  <br>
                &nbsp;&nbsp;<span class="code-comment">/* Initialize context. */</span>          <br>
                &nbsp;&nbsp;TileDB_CTX* tiledb_ctx;                                              <br>
                &nbsp;&nbsp;tiledb_ctx_init(&amp;tiledb_ctx);                                    <br>
                                                                                                  <br>
                &nbsp;&nbsp;<span class="code-comment">/* Create workspace. */</span>            <br>
                &nbsp;&nbsp;tiledb_workspace_create(tiledb_ctx, "my_workspace", "my_catalog");   <br>
                                                                                                  <br>
                &nbsp;&nbsp;<span class="code-comment">/* Finalize context. */</span>            <br>
                &nbsp;&nbsp;tiledb_ctx_finalize(tiledb_ctx);                                     <br>
                                                                                                  <br>
                &nbsp;&nbsp;<b>return</b> 0;                                                     <br>
                }
            </p>
                
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_workspace_move(                                   <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_CTX* tiledb_ctx,                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> old_workspace,                        <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> new_workspace,                        <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> master_catalog);
            </p>
            
            <p class="api-explanation">
                Renames an existing TileDB workspace. Input <span class="code-font">tiledb_ctx</span> 
                is the TileDB context. Input <span class="code-font">old_workspace</span> 
                is the old workspace name. Input <span class="code-font">new_workspace</span> is the
                new workspace name. Input <span class="code-font">master_catalog</span> is the path to 
                the master catalog. On success, the function returns <span class="code-font">TILEDB_OK</span>; 
                on failure, it returns <span class="code-font">TILEDB_ERR</span>.
            </p>
                
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_workspace_clear(                                  <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_CTX* tiledb_ctx,                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> workspace);           
            </p>
            
            <p class="api-explanation">
                Clears an existing TileDB workspace, deleting all its groups, arrays and metadata. 
                After the execution of this function, the workspace directory will exist, but it
                will be empty. Input <span class="code-font">tiledb_ctx</span> is the TileDB context. 
                Input <span class="code-font">workspace</span> is the workspace to be
                cleared. On success, the function returns <span class="code-font">TILEDB_OK</span>; 
                on failure, it returns <span class="code-font">TILEDB_ERR</span>.
            </p>
                
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_workspace_delete(                                 <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_CTX* tiledb_ctx,                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> workspace,                            <br>                 
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> master_catalog);
            </p>
            
            <p class="api-explanation">
                Deletes an entire TileDB workspace directory. Input <span class="code-font">tiledb_ctx</span> 
                is the TileDB context. Input <span class="code-font">workspace</span> is the workspace to be 
                deleted. Input <span class="code-font">master_catalog</span> is the path to the master catalog. 
                On success, the function returns <span class="code-font">TILEDB_OK</span>; on failure, it returns 
                <span class="code-font">TILEDB_ERR</span>.
            </p>
                
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_master_catalog_move(                              <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_CTX* tiledb_ctx,                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> old_master_catalog,                   <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> new_master_catalog);
            </p>
            
            <p class="api-explanation">
                Renames an existing TileDB master catalog. Input <span class="code-font">tiledb_ctx</span> 
                is the TileDB context. Input <span class="code-font">old_master_catalog</span> is the master 
                catalog to be renamed. Input <span class="code-font">new_master_catalog</span> is the new
                master catalog name. On success, the function returns <span class="code-font">TILEDB_OK</span>; 
                on failure, it returns <span class="code-font">TILEDB_ERR</span>.
            </p>
                
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_master_catalog_delete(                            <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_CTX* tiledb_ctx,                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> master_catalog);
            </p>
            
            <p class="api-explanation">
                Deletes a TileDB master catalog. Input <span class="code-font">tiledb_ctx</span> 
                is the TileDB context. Input <span class="code-font">master_catalog</span> is the master 
                catalog to be deleted. On success, the function returns <span class="code-font">TILEDB_OK</span>; 
                on failure, it returns <span class="code-font">TILEDB_ERR</span>.
            </p>
                
            <h2><a name="groups">Groups</a></h2>
            
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_group_create(                                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_CTX* tiledb_ctx,                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> group);
            </p>
            
            <p class="api-explanation">
                Creates a new TileDB group. Input <span class="code-font">tiledb_ctx</span> 
                is the TileDB context. Input <span class="code-font">group</span> is the path to a
                directory in the file system, whose parent must be a TileDB workspace or another
                TileDB group. On success, the function returns <span class="code-font">TILEDB_OK</span>; 
                on failure, it returns <span class="code-font">TILEDB_ERR</span>.
            </p>
            
            <p class="code-block">
                <span class="code-comment"> 
                     /*                                                                          <br>
                     &nbsp;* File: <b>tiledb_group_create.cc</b>                                 <br>
                     &nbsp;*                                                                     <br>
                     &nbsp;* Creating a TileDB group.                                            <br>
                     &nbsp;*/                                                                    <br>
                </span>
                                                                                                  <br>
                <b>#include</b> "tiledb.h"                                                        <br>
                                                                                                  <br>
                <b>int</b> main() {                                                               <br>
                                                                                                  <br>
                &nbsp;&nbsp;<span class="code-comment">/* Initialize context */</span>           <br>
                &nbsp;&nbsp;TileDB_CTX* tiledb_ctx;                                              <br>
                &nbsp;&nbsp;tiledb_ctx_init(&amp;tiledb_ctx);                                    <br>
                                                                                                  <br>
                &nbsp;&nbsp;<span class="code-comment">/* Create group */</span>                 <br>
                &nbsp;&nbsp;tiledb_group_create(tiledb_ctx, "my_group");                         <br>
                                                                                                  <br>
                &nbsp;&nbsp;<span class="code-comment">/* Finalize context */</span>             <br>
                &nbsp;&nbsp;tiledb_ctx_finalize(tiledb_ctx);                                     <br>
                                                                                                  <br>
                &nbsp;&nbsp;<b>return</b> 0;                                                     <br>
                }
            </p>
                
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_group_move(                                       <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_CTX* tiledb_ctx,                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> old_group,                            <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> new_group); 
            </p>
            
            <p class="api-explanation">
                Renames an existing TileDB group. Input <span class="code-font">tiledb_ctx</span> 
                is the TileDB context. Input <span class="code-font">old_group</span> 
                is the old group name. Input <span class="code-font">new_group</span> is the
                new group name, which must be a path to a directory whose parent is a TileDB workspace or
                another TileDB group. On success, the function returns <span class="code-font">TILEDB_OK</span>; 
                on failure, it returns <span class="code-font">TILEDB_ERR</span>.
            </p>
                
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_group_clear(                                      <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_CTX* tiledb_ctx,                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> group);           
            </p>
            
            <p class="api-explanation">
                Clears an existing TileDB group, deleting all its groups, arrays and metadata. 
                After the execution of this function, the group directory will exist, but it
                will be empty. Input <span class="code-font">tiledb_ctx</span> is the TileDB context. 
                Input <span class="code-font">group</span> is the group to be
                cleared. On success, the function returns <span class="code-font">TILEDB_OK</span>; 
                on failure, it returns <span class="code-font">TILEDB_ERR</span>.
            </p>
                
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_group_delete(                                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_CTX* tiledb_ctx,                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> group);
            </p>
            
            <p class="api-explanation">
                Deletes an entire TileDB group directory. Input <span class="code-font">tiledb_ctx</span> 
                is the TileDB context. Input <span class="code-font">group</span> is the group to be deleted. 
                On success, the function returns <span class="code-font">TILEDB_OK</span>; on failure, it returns 
                <span class="code-font">TILEDB_ERR</span>.
            </p>
                
            <h2><a name="arrays">Arrays</a></h2>
                
            <h3>Schema</h3>
                
            <p class="api-explanation">
                In order to create an array, the user must specify its schema. This is done by populating the
                following struct (see 
                <a href="tiledb_mechanics_101.html" target="tutorial-frame" 
                   onclick='parent.document.getElementById("TileDB-mechanics-101").checked=true;'>
                    TileDB Mechanics 101</a>  
                for more details on how each field should be set according to the user's application scenario).
            </p>
            
            <p class=api-declaration>
                <b>typedef struct</b> TileDB_ArraySchema {                                                                <br>
                <span class=code-comment> 
                    &nbsp;&nbsp;/*                                                                                       <br>
                    &nbsp;&nbsp;&nbsp;* The array name. It is a path to a directory, whose parent is a TileDB            <br>
                    &nbsp;&nbsp;&nbsp;* workspace or a TileDB group.                                                     <br>
                    &nbsp;&nbsp;&nbsp;*/                                                                                 <br>
                </span>
                &nbsp;&nbsp;<b>const char*</b>  array_name_;                                                             <br>
                <span class=code-comment>
                    &nbsp;&nbsp;/* The attribute names. */                                                               <br>
                </span>
                &nbsp;&nbsp;<b>const char**</b>  attributes_;                                                            <br>
                <span class=code-comment>
                    &nbsp;&nbsp;/* The number of attributes. */                                                          <br>
                </span>
                &nbsp;&nbsp; <b>int</b>  attribute_num_;                                                                  <br>
                <span class=code-comment> 
                    &nbsp;&nbsp;/*                                                                                       <br>
                    &nbsp;&nbsp;&nbsp;* The tile capacity (only applicable to irregular tiles). If it is 0, a            <br>
                    &nbsp;&nbsp;&nbsp;* default value is used (typically 1000 or 10000).                                 <br>
                    &nbsp;&nbsp;&nbsp;*/                                                                                 <br>
                </span>
                &nbsp;&nbsp;<b>int64_t</b> capacity_;                                                                    <br>
                <span class=code-comment> 
                    &nbsp;&nbsp;/*                                                                                       <br>
                    &nbsp;&nbsp;&nbsp;* The cell order. The supported orders are <b>row-major</b>, <b>column-major</b>   <br>
                    &nbsp;&nbsp;&nbsp;* and <b>hilbert</b>. If it is set to NULL, then <b>row-major</b> is selected as   <br>
                    &nbsp;&nbsp;&nbsp;* default.                                                                         <br>
                    &nbsp;&nbsp;&nbsp;*/                                                                                 <br>
                </span>
                &nbsp;&nbsp;<b>const char*</b> cell_order_;                                                              <br>
                <span class=code-comment> 
                    &nbsp;&nbsp;/*                                                                                       <br>
                    &nbsp;&nbsp;&nbsp;* The type of compression. The supported compression types are <b>NONE</b> and     <br>
                    &nbsp;&nbsp;&nbsp;* <b>GZIP</b>. The number of compression types given should be equal to the        <br>
                    &nbsp;&nbsp;&nbsp;* number of attributes, plus one (the last one) for the coordinates.               <br>
                    &nbsp;&nbsp;&nbsp;* If it is NULL, <b>NONE</b> is selected as default for all attributes and         <br>
                    &nbsp;&nbsp;&nbsp;* coordinates.                                                                     <br>
                    &nbsp;&nbsp;&nbsp;*/                                                                                 <br>
                </span>
                &nbsp;&nbsp;<b>const char**</b> compression_;                                                            <br>
                <span class=code-comment> 
                    &nbsp;&nbsp;/* The consolidation step. If it is 0, then it is set to 1 by default. */                <br>
                </span>
                &nbsp;&nbsp;<b>int</b> consolidation_step_;                                                              <br>
                <span class=code-comment> 
                    &nbsp;&nbsp;/*                                                                                       <br>
                    &nbsp;&nbsp;&nbsp;* If it is equal to 1, the array is in dense format; if it is equal to 0           <br>
                    &nbsp;&nbsp;&nbsp;* the array is in sparse format.                                                   <br>
                    &nbsp;&nbsp;&nbsp;*/                                                                                 <br>
                </span>
                &nbsp;&nbsp;<b>int</b> dense_;                                                                           <br>              
                <span class=code-comment> 
                    &nbsp;&nbsp;/* The dimension names. */                                                               <br>
                </span>
                &nbsp;&nbsp;<b>const char**</b> dimensions_;                                                             <br>
                <span class=code-comment> 
                    &nbsp;&nbsp;/* The number of dimensions. */                                                          <br>
                </span>
                &nbsp;&nbsp;<b>int</b> dim_num;                                                                          <br>
                <span class=code-comment> 
                    &nbsp;&nbsp;/*                                                                                       <br>
                    &nbsp;&nbsp;&nbsp;* The domain. It should contain one [lower, upper] pair for each dimension         <br>
                    &nbsp;&nbsp;&nbsp;* domain.                                                                          <br>
                    &nbsp;&nbsp;&nbsp;*/                                                                                 <br>
                </span>
                &nbsp;&nbsp;<b>double*</b> domain_;                                                                      <br>         
                <span class=code-comment> 
                    &nbsp;&nbsp;/*                                                                                       <br>
                    &nbsp;&nbsp;&nbsp;* The tile extents (only applicable to regular tiles and dense arrays).            <br>
                    &nbsp;&nbsp;&nbsp;* There should be one value for each dimension.                                    <br>
                    &nbsp;&nbsp;&nbsp;*/                                                                                 <br>
                </span>
                &nbsp;&nbsp;<b>double*</b> tile_extents_;                                                                <br>
                <span class=code-comment> 
                    &nbsp;&nbsp;/*                                                                                       <br>
                    &nbsp;&nbsp;&nbsp;* The tile order (only applicable to regular tiles and dense arrays). The          <br>
                    &nbsp;&nbsp;&nbsp;* supported orders are <b>row-major</b>, <b>column-major</b> and <b>hilbert</b>.   <br>
                    &nbsp;&nbsp;&nbsp;* If it is set to NULL, then <b>row-major</b> is selected as default.              <br>
                    &nbsp;&nbsp;&nbsp;*/                                                                                 <br>
                </span>
                &nbsp;&nbsp;<b>const char*</b> tile_order_;                                                              <br>
                
                <span class=code-comment> 
                    &nbsp;&nbsp;/*                                                                                       <br>
                    &nbsp;&nbsp;&nbsp;* The attribute and coordinate types. There should be one type per                 <br>
                    &nbsp;&nbsp;&nbsp;* attribute plus one (the last one) for the coordinates. The supported types       <br>
                    &nbsp;&nbsp;&nbsp;* for the attributes are <b>char</b>, <b>int32</b>, <b>int64</b>, <b>float32</b>,  
                                        and <b>float64</b>. If the user                                                  <br>
                    &nbsp;&nbsp;&nbsp;* wishes to have any arbitrary <b>fixed</b> number N of values for some attribute, <br>
                    &nbsp;&nbsp;&nbsp;* he/she should append <b>:N</b> to the attribute type, e.g., <b>int32:3</b>.      <br>
                    &nbsp;&nbsp;&nbsp;* If the user wishes to have a <b>variable</b> number of values for some           <br>
                    &nbsp;&nbsp;&nbsp;* attribute, he/she should append <b>:var</b> to the attribute type, e.g.,         <br>
                    &nbsp;&nbsp;&nbsp;* <b>char:var</b>. The supported types for coordinates are <b>int32</b>,           <br>
                    &nbsp;&nbsp;&nbsp;* <b>int64</b>, <b>float32</b>, and <b>float64</b>.                                <br>
                    &nbsp;&nbsp;&nbsp;*/                                                                                 <br>
                </span>
                &nbsp;&nbsp;<b>const char**</b> types_;                                                                  <br>
                } TileDB_ArraySchema;
            </p>
            
            <p class="margin"></p>
            
            <h3>Create, Rename, Clear, Delete</h3>
            
            <p class="api-declaration">
                TILEDB_EXPORT <b>int</b> tiledb_array_create(                                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_ArraySchema* array_schema);
            </p>
            
            <p class="api-explanation">
                Creates a new TileDB array. Input <span class="code-font">tiledb_ctx</span> 
                is the TileDB context. Input <span class="code-font">array_schema</span> is the array
                schema. It is assumed that the user has already properly populated the array schema struct. 
                On success, the function returns <span class="code-font">TILEDB_OK</span>; 
                on failure, it returns <span class="code-font">TILEDB_ERR</span>.
            </p>
            
            <p>
                The following code exampe shows how to create a sparse TileDB array. 
            </p>
            
            <p class="code-block">
                <span class="code-comment"> 
                     /*                                                                          <br>
                     &nbsp;* File: <b>tiledb_array_create.cc</b>                                 <br>
                     &nbsp;*                                                                     <br>
                     &nbsp;* Creating a TileDB array.                                            <br>
                     &nbsp;*/                                                                    <br>
                </span>
                                                                                                  <br>
                <b>#include</b> "tiledb.h"                                                        <br>
                                                                                                  <br>
                <b>int</b> main() {                                                               <br>
                                                                                                  <br>
                &nbsp;&nbsp;<span class="code-comment">/* Initialize context. */</span>           <br>
                &nbsp;&nbsp;TileDB_CTX* tiledb_ctx;                                               <br>
                &nbsp;&nbsp;tiledb_ctx_init(&amp;tiledb_ctx);                                     <br>
                                                                                                  <br>
                <span class=code-comment> 
                    &nbsp;&nbsp;/*                                                                                       <br>
                    &nbsp;&nbsp;&nbsp;* Define the array schema struct.                                                  <br>
                    &nbsp;&nbsp;&nbsp;* <b>IMPORTANT:</b> Initialize it as empty, so that all numeric members get set    <br>
                    &nbsp;&nbsp;&nbsp;* to 0, and all pointers to NULL. This is vital so that TileDB can set             <br>
                    &nbsp;&nbsp;&nbsp;* default values for the members not set by the user.                              <br>
                    &nbsp;&nbsp;&nbsp;*/                                                                                 <br>
                </span>
                &nbsp;&nbsp;TileDB_ArraySchema array_schema = {};                                                        <br>
                                                                                                  <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Set array name to "A", inside (existing) workspace "my_workspace". */                 <br>
                </span>
                &nbsp;&nbsp;array_schema.array_name_ = "my_workspace/A";                                                 <br>
                                                                                                  <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Set attributes and number of attributes. */                   <br>
                </span>
                &nbsp;&nbsp;<b>int</b> attribute_num = 2;                                        <br>
                &nbsp;&nbsp;array_schema.attributes_ = <b>new const char*</b>[attribute_num];    <br>
                &nbsp;&nbsp;array_schema.attributes_[0] = "a1";                                  <br>
                &nbsp;&nbsp;array_schema.attributes_[1] = "a2";                                  <br>
                &nbsp;&nbsp;array_schema.attribute_num_ = attribute_num;                         <br>
                                                                                                  <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Set capacity. */                                              <br>
                </span>
                &nbsp;&nbsp;array_schema.capacity_ = 2000;                                       <br>
                                                                                                  <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Set cell order. */                                            <br>
                </span>
                &nbsp;&nbsp;array_schema.cell_order_ = "column-major";                           <br>
                                                                                                 <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Set dimensions and number of dimensions. */                   <br>
                </span>
                &nbsp;&nbsp;<b>int</b> dim_num = 2;                                              <br>
                &nbsp;&nbsp;array_schema.dimensions_ = <b>new const char*</b>[dim_num];          <br>
                &nbsp;&nbsp;array_schema.dimensions_[0] = "d1";                                  <br>
                &nbsp;&nbsp;array_schema.dimensions_[1] = "d2";                                  <br>
                &nbsp;&nbsp;array_schema.dim_num_ = dim_num;                                     <br>
                                                                                                  <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Set domain to [1,100], [1,100]. */                            <br>
                </span>
                &nbsp;&nbsp;array_schema.domain_ = <b>new double</b>[2*dim_num];                 <br>
                &nbsp;&nbsp;array_schema.domain_[0] = 1;                                         <br>
                &nbsp;&nbsp;array_schema.domain_[1] = 100;                                       <br>
                &nbsp;&nbsp;array_schema.domain_[2] = 1;                                         <br>
                &nbsp;&nbsp;array_schema.domain_[3] = 100;                                       <br>
                                                                                                  <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/*                                                                    <br>
                    &nbsp;&nbsp;&nbsp;* Set types: <b>int32</b> for "a1", <b>float32</b> for "a2",    
                                        and <b>int64</b>                                              <br>
                    &nbsp;&nbsp;&nbsp;* for the coordinates.                                          <br>
                    &nbsp;&nbsp;&nbsp;*/                                                              <br>
                </span>
                &nbsp;&nbsp;array_schema.types_ = <b>new const char*</b>[attribute_num+1];       <br>
                &nbsp;&nbsp;array_schema.types_[0] = "int32";                                    <br>
                &nbsp;&nbsp;array_schema.types_[1] = "float32";                                  <br>
                &nbsp;&nbsp;array_schema.types_[2] = "int64";                                    <br>
                                                                                                  <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/*                                                                                       <br>
                    &nbsp;&nbsp;&nbsp;* <b>NOTE:</b> The rest of the array schema members will be set to default values. <br>
                    &nbsp;&nbsp;&nbsp;* This implies that the array we are creating is sparse, with irregular            <br>
                    &nbsp;&nbsp;&nbsp;* tiles, no compression, and consolidation step equal to 1.                        <br>
                    &nbsp;&nbsp;&nbsp;*/                                                                                 <br>
                </span>
                                                                                                  <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Create the array. */                                          <br>
                </span>
                &nbsp;&nbsp;tiledb_array_create(tiledb_ctx, &amp;array_schema);                  <br>
                                                                                                  <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Finalize context. */                                          <br>
                </span>
                &nbsp;&nbsp;tiledb_ctx_finalize(tiledb_ctx);                                     <br>
                                                                                                  <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Clean up. */                                                  <br>
                </span>
                &nbsp;&nbsp;<b>delete</b> [] array_schema.attributes_;                           <br>
                &nbsp;&nbsp;<b>delete</b> [] array_schema.dimensions_;                           <br>
                &nbsp;&nbsp;<b>delete</b> [] array_schema.domain_;                               <br>
                &nbsp;&nbsp;<b>delete</b> [] array_schema.types_;                                <br>
                                                                                                  <br>
                &nbsp;&nbsp;<b>return</b> 0;                                                     <br>
                }                                                                                 <br>
            </p>
            
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_array_move(                                       <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_CTX* tiledb_ctx,                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> old_array,                            <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> new_array); 
            </p>
            
            <p class="api-explanation">
                Renames an existing TileDB array. Input <span class="code-font">tiledb_ctx</span> 
                is the TileDB context. Input <span class="code-font">old_array</span> 
                is the old array name. Input <span class="code-font">new_array</span> is the
                new array name, which must be a path to a directory whose parent is a TileDB workspace or
                another TileDB group. On success, the function returns <span class="code-font">TILEDB_OK</span>; 
                on failure, it returns <span class="code-font">TILEDB_ERR</span>.
            </p>
            
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_array_clear(                                      <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_CTX* tiledb_ctx,                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> array);           
            </p>
            
            <p class="api-explanation">
                Clears an existing TileDB array, deleting all its data, <b>except</b> its array
                schema and directory. Input <span class="code-font">tiledb_ctx</span> is the TileDB 
                context. Input <span class="code-font">array</span> is the array to be
                cleared. On success, the function returns <span class="code-font">TILEDB_OK</span>; 
                on failure, it returns <span class="code-font">TILEDB_ERR</span>.
            </p>
            
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_array_delete(                                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_CTX* tiledb_ctx,                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> array);
            </p>
            
            <p class="api-explanation">
                Deletes an entire TileDB array directory. Input <span class="code-font">tiledb_ctx</span> 
                is the TileDB context. Input <span class="code-font">array</span> is the array to be deleted. 
                On success, the function returns <span class="code-font">TILEDB_OK</span>; on failure, it returns 
                <span class="code-font">TILEDB_ERR</span>.
            </p>
            
            <h3>Write, Read</h3>
            
            <p>
                Prior to writing to or reading from an array, the user must open the array in the appropriate mode.
                This is realized by function <span class="code-font">tiledb_array_open</span> described below,
                which returns a non-negative integer, called <span class="bold-text">array descriptor</span>
                (<span class="code-font">ad</span>). The supported array modes are 
                <span class="code-font">TILEDB_ARRAY_MODE_READ</span> for reading, and 
                <span class="code-font">TILEDB_ARRAY_MODE_WRITE</span> for writing. All subsequent operations on the 
                array take as input this descriptor. After finishing working on an open array, the user must close it 
                with function <span class="code-font">tiledb_array_close</span> declared below.
            </p>
            
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_array_open(                                      <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_CTX* tiledb_ctx,                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> array,                                <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>int</b> mode);
            </p>
            
            <p class="api-explanation">
                Opens a TileDB array. Input <span class="code-font">tiledb_ctx</span> is the TileDB 
                context. Input <span class="code-font">array</span> is the name of the array to be
                opened. Input <span class="code-font">mode</span> is the array mode, which can be one of
                <span class="code-font">TILEDB_ARRAY_MODE_READ</span> or <span class="code-font">TILEDB_ARRAY_MODE_WRITE</span>. 
                On success, the function returns a non-negative integer (the array descriptor); 
                on failure, it returns <span class="code-font">TILEDB_ERR</span>.
            </p>
            
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_array_close(                                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_CTX* tiledb_ctx,                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>int</b> ad);
            </p>
            
            <p class="api-explanation">
                Closes an open TileDB array. Input <span class="code-font">tiledb_ctx</span> is the TileDB 
                context. Input <span class="code-font">ad</span> is the descriptor of the array to be
                closed. On success, the function returns <span class="code-font">TILEDB_OK</span>; on failure, 
                it returns <span class="code-font">TILEDB_ERR</span>.
            </p>
            
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_array_write_dense(                                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_CTX* tiledb_ctx,                           <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>int</b> ad,                                                 <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const void*</b> cell);
            </p>
            
            <p class="api-explanation">
                Writes a cell into an array in dense mode. This means that the user must
                make sure to write the cells one after the other respecting the array's
                cell order. Moreover, the cells are also in the dense binary format,
                which means that they do not carry explicitly the coordinates (see
                the <a href="tiledb_mechanics_101.html#cells" target="tutorial-frame" 
                    onclick='parent.document.getElementById("TileDB-mechanics-101").checked=true;'>
                    TileDB Mechanics 101</a> tutorial for more details on the dense
                binary cell format). Input <span class="code-font">tiledb_ctx</span> is the TileDB 
                context. Input <span class="code-font">ad</span> is the descriptor of the array where
                the write will occur. Input <span class="code-font">cell</span> is the cell to be written 
                (in dense binary format). On success, the function returns 
                <span class="code-font">TILEDB_OK</span>; on failure, it returns 
                <span class="code-font">TILEDB_ERR</span>.
            </p>
            
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_array_read_dense(                                      <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_CTX* tiledb_ctx,                           <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>int</b> ad,                                                 <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const double*</b> range,                                    <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char**</b> attributes,                                <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>int</b> attribute_num,                                      <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>void*</b> buffer,                                           <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>int*</b> buffer_size);
            </p>
            
            <p class="api-explanation">
                Reads into an input buffer all the cells that lie within an input range 
                (subarray). The cells are written in the dense binary cell format 
                (see the <a href="tiledb_mechanics_101.html#cells" target="tutorial-frame" 
                    onclick='parent.document.getElementById("TileDB-mechanics-101").checked=true;'>
                    TileDB Mechanics 101</a> tutorial for more details on the dense
                binary cell format). Moreover, the cells are written in the buffer respecting the array 
                tile and cell orders. Finally, for each cell, the function reads only the attribute values
                specified in the <span class="code-font">attributes</span> argument.  Input 
                <span class="code-font">tiledb_ctx</span> is the TileDB 
                context. Input <span class="code-font">ad</span> is the descriptor of the array where
                the read will occur. Input <span class="code-font">range</span> is the range (subarray) 
                of the cells to be read. It must be given as a list of pairs (lower, upper). The number of pairs 
                should be equal to the number of array dimensions. Input <span class="code-font">attributes</span> 
                is the names of the attributes whose values will be included for each cell. If NULL is provided instead, 
                then <b>all</b> cell attributes will be read. Input <span class="code-font">attribute_num</span> is the
                number of attributes. Input <span class="code-font">buffer</span> is the buffer which the cells will be 
                read into. Note that this buffer is owned by the caller. Input <span class="code-font">buffer_size</span>
                is the capacity of the input buffer. This is used by the function in order to check for overflows while writing 
                into it. Upon successful termination, the function sets it to the size of the buffer that it used to 
                write the cells. On success, the function returns 
                <span class="code-font">TILEDB_OK</span>; in case of buffer overflow it returns 
                <span class="code-font">TILEDB_READ_BUFFER_OVERFLOW</span>; on failure, it returns 
                <span class="code-font">TILEDB_ERR</span>.
            </p>
            
            <p>
                The following examples demonstrate how to create and write to a dense array, as well as how to
                read from it.
            </p>
            
            <p class="code-block">
                <span class="code-comment"> 
                     /*                                                                          <br>
                     &nbsp;* File: <b>tiledb_array_write_dense.cc</b>                            <br>
                     &nbsp;*                                                                     <br>
                     &nbsp;* Creating and writing to a dense array.                              <br>
                     &nbsp;*/                                                                    <br>
                </span>
                                                                                                  <br>
                <b>#include</b> "tiledb.h"                                                        <br>
                                                                                                  <br>
                <span class="code-comment">
                    /* Defined after the main function. */                                        <br>
                </span>
                void create_a_dense_array(TileDB_CTX* tiledb_ctx);                                <br>
                                                                                                  <br>
                <b>int</b> main() {                                                               <br>
                                                                                                  <br>
                &nbsp;&nbsp;<span class="code-comment">/* Initialize context. */</span>           <br>
                &nbsp;&nbsp;TileDB_CTX* tiledb_ctx;                                               <br>
                &nbsp;&nbsp;tiledb_ctx_init(&amp;tiledb_ctx);                                     <br>
                                                                                                  <br>
                <span class=code-comment> 
                    &nbsp;&nbsp;/*                                                                                       <br>
                    &nbsp;&nbsp;&nbsp;* We first create a dense array "my_workspace/B", which has 2 dimensions,          <br>
                    &nbsp;&nbsp;&nbsp;* a single <b>float</b> attribute "a1", domain [1,4], [1,4], and tile extent 2     <br>
                    &nbsp;&nbsp;&nbsp;* across each dimension. Both tile and cell orders are <b>row-major</b>.           <br>
                    &nbsp;&nbsp;&nbsp;*/                                                                                 <br>
                </span>
                &nbsp;&nbsp;create_a_dense_array(tiledb_ctx);                                     <br>
                                                                                                  <br>
                <span class=code-comment> 
                    &nbsp;&nbsp;/*                                                                                       <br>
                    &nbsp;&nbsp;&nbsp;* We will write all 16 cells of the array, in the array tile and cell              <br>
                    &nbsp;&nbsp;&nbsp;* order. We first open the array in write mode.                                    <br>
                    &nbsp;&nbsp;&nbsp;*/                                                                                 <br>
                </span>
                &nbsp;&nbsp;<b>int</b> ad = tiledb_array_open(                                                           <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                   tiledb_ctx,                                                                                           <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                   "my_workspace/B",                                                                                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                   TILEDB_ARRAY_MODE_WRITE);                                                                             <br>
                                                                                                                         <br>
                <span class=code-comment> 
                    &nbsp;&nbsp;/*                                                                                       <br>
                    &nbsp;&nbsp;&nbsp;* Allocate space for the cell values. In our simple example, each cell             <br>
                    &nbsp;&nbsp;&nbsp;* has a single <b>float</b> attribute.  We will populate the 16 cells              <br>
                    &nbsp;&nbsp;&nbsp;* with float values from 0.1 to 1.6, having a step of 0.1.                         <br>
                    &nbsp;&nbsp;&nbsp;*/                                                                                 <br>
                </span>
                &nbsp;&nbsp;<b>float</b> cells[16];                                                                      <br>
                &nbsp;&nbsp;cells[0] = 0.1;                                                                              <br>
                &nbsp;&nbsp;<b>for</b>(<b>int</b> i=1; i<16; ++i)                                                        <br>
                &nbsp;&nbsp;&nbsp;&nbsp;cells[i] = cells[i-1] + 0.1;                                                     <br>
                                                                                                                         <br>
                <span class=code-comment> 
                    &nbsp;&nbsp;/*                                                                                       <br>
                    &nbsp;&nbsp;&nbsp;* Write cells to array. Based on the tiling of the array and the                   <br>
                    &nbsp;&nbsp;&nbsp;* tile and cell orders, the cells are written in the following                     <br>
                    &nbsp;&nbsp;&nbsp;* order of coordinates:                                                            <br>
                    &nbsp;&nbsp;&nbsp;* (1,1), (1,2), (2,1), (2,2), (1,3), (1,4), (2,3), (2,4)                           <br>
                    &nbsp;&nbsp;&nbsp;* (3,1), (3,2), (4,1), (4,2), (3,3), (3,4), (4,3), (4,4)                           <br>
                    &nbsp;&nbsp;&nbsp;*/                                                                                 <br>
                </span>
                &nbsp;&nbsp;<b>for</b>(<b>int</b> i=0; i<16; ++i)                                                        <br>
                &nbsp;&nbsp;&nbsp;&nbsp;tiledb_array_write_dense(tiledb_ctx, ad, &amp;cells[i]);                         <br>
                                                                                                                         <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Close the array. */                                                                   <br>
                </span>
                &nbsp;&nbsp;tiledb_array_close(tiledb_ctx, ad);                                                          <br>
                                                                                                                         <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Finalize context. */                                          <br>
                </span>
                &nbsp;&nbsp;tiledb_ctx_finalize(tiledb_ctx);                                     <br>
                                                                                                 <br>
                &nbsp;&nbsp;<b>return</b> 0;                                                     <br>
                }                                                                                <br>
                                                                                                 <br>
                <b>void</b> create_a_dense_array(TileDB_CTX* tiledb_ctx) {                       <br>
                                                                                                 <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Prepare the array schema. */                                  <br>
                </span>
                &nbsp;&nbsp;TileDB_ArraySchema array_schema = {};                                <br>
                                                                                                 <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Set array name to "B", inside (existing) workspace "my_workspace". */                 <br>
                </span>
                &nbsp;&nbsp;array_schema.array_name_ = "my_workspace/B";                                                 <br>
                                                                                                                         <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Set attributes and number of attributes. */                                           <br>
                </span>
                &nbsp;&nbsp;<b>int</b> attribute_num = 1;                                                                <br>
                &nbsp;&nbsp;array_schema.attributes_ = <b>new const char*</b>[attribute_num];                            <br>
                &nbsp;&nbsp;array_schema.attributes_[0] = "a1";                                                          <br>
                &nbsp;&nbsp;array_schema.attribute_num_ = attribute_num;                                                 <br>
                                                                                                                         <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Set dimensions and number of dimensions. */                                           <br>
                </span>
                &nbsp;&nbsp;<b>int</b> dim_num = 2;                                                                      <br>
                &nbsp;&nbsp;array_schema.dimensions_ = <b>new const char*</b>[dim_num];                                  <br>
                &nbsp;&nbsp;array_schema.dimensions_[0] = "d1";                                                          <br>
                &nbsp;&nbsp;array_schema.dimensions_[1] = "d2";                                                          <br>
                &nbsp;&nbsp;array_schema.dim_num_ = dim_num;                                                             <br>
                                                                                                                         <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* The array is dense. */                                                                <br>
                </span>
                &nbsp;&nbsp;array_schema.dense_ = 1;                                                                     <br>
                                                                                                                         <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Set tile extents. */                                                                  <br>
                </span>
                &nbsp;&nbsp;array_schema.tile_extents_ = <b>new double</b>[dim_num];                                     <br>
                &nbsp;&nbsp;array_schema.tile_extents_[0] = 2;                                                           <br>
                &nbsp;&nbsp;array_schema.tile_extents_[1] = 2;                                                           <br>
                                                                                                                         <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Set domain to [1,3], [1,3]. */                                                        <br>
                </span>
                &nbsp;&nbsp;array_schema.domain_ = <b>new double</b>[2*dim_num];                                         <br>
                &nbsp;&nbsp;array_schema.domain_[0] = 1;                                                                 <br>
                &nbsp;&nbsp;array_schema.domain_[1] = 4;                                                                 <br>
                &nbsp;&nbsp;array_schema.domain_[2] = 1;                                                                 <br>
                &nbsp;&nbsp;array_schema.domain_[3] = 4;                                                                 <br>
                                                                                                                         <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Set types: <b>float32</b> for "a1" and <b>int64</b> for the coordinates. */           <br>
                </span>
                &nbsp;&nbsp;array_schema.types_ = <b>new const char*</b>[attribute_num+1];                               <br>
                &nbsp;&nbsp;array_schema.types_[0] = "float32";                                                          <br>
                &nbsp;&nbsp;array_schema.types_[1] = "int64";                                                            <br>
                                                                                                                         <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Create the array. */                                                                  <br>
                </span>
                &nbsp;&nbsp;tiledb_array_create(tiledb_ctx, &amp;array_schema);                                          <br>    
                                                                                                                         <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Clean up. */                                                                          <br>
                </span>
                &nbsp;&nbsp;<b>delete</b> [] array_schema.attributes_;                                                   <br>
                &nbsp;&nbsp;<b>delete</b> [] array_schema.dimensions_;                                                   <br>
                &nbsp;&nbsp;<b>delete</b> [] array_schema.tile_extents_;                                                 <br>
                &nbsp;&nbsp;<b>delete</b> [] array_schema.domain_;                                                       <br>
                &nbsp;&nbsp;<b>delete</b> [] array_schema.types_;                                                        <br>
                }
            </p>
            
            <p class="code-block">
                <span class="code-comment"> 
                     /*                                                                          <br>
                     &nbsp;* File: <b>tiledb_array_read_dense.cc</b>                             <br>
                     &nbsp;*                                                                     <br>
                     &nbsp;* Creating and writing to a dense array. Follows the example of       <br>
                     &nbsp;* <b>tiledb_array_write_dense.cc</b>                                  <br>
                     &nbsp;*/                                                                    <br>
                </span>
                                                                                                  <br>
                <b>#include</b> "tiledb.h"                                                        <br>
                <b>#include</b> &lt;iostream&gt;                                                  <br>
                                                                                                  <br>
                <b>int</b> main() {                                                               <br>
                                                                                                  <br>
                &nbsp;&nbsp;<span class="code-comment">/* Initialize context. */</span>           <br>
                &nbsp;&nbsp;TileDB_CTX* tiledb_ctx;                                               <br>
                &nbsp;&nbsp;tiledb_ctx_init(&amp;tiledb_ctx);                                     <br>
                                                                                                  <br>
                <span class=code-comment> 
                    &nbsp;&nbsp;/*                                                                                       <br>
                    &nbsp;&nbsp;&nbsp;* We first create a dense array "my_workspace/B", which has 2 dimensions,          <br>
                    &nbsp;&nbsp;&nbsp;* a single <b>float</b> attribute "a1", domain [1,4], [1,4], and tile extent 2     <br>
                    &nbsp;&nbsp;&nbsp;* across each dimension. Both tile and cell orders are <b>row-major</b>.           <br>
                    &nbsp;&nbsp;&nbsp;*/                                                                                 <br>
                </span>
                &nbsp;&nbsp;create_a_dense_array(tiledb_ctx);                                     <br>
                                                                                                  <br>
                <span class=code-comment> 
                    &nbsp;&nbsp;/*                                                                                       <br>
                    &nbsp;&nbsp;&nbsp;* We will write all 16 cells of the array, in the array tile and cell              <br>
                    &nbsp;&nbsp;&nbsp;* order. We first open the array in write mode.                                    <br>
                    &nbsp;&nbsp;&nbsp;*/                                                                                 <br>
                </span>
                &nbsp;&nbsp;<b>int</b> ad = tiledb_array_open(                                                           <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                   tiledb_ctx,                                                                                           <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                   "my_workspace/B",                                                                                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                   TILEDB_ARRAY_MODE_READ);                                                                              <br>
                                                                                                                         <br>
                <span class=code-comment> 
                    &nbsp;&nbsp;/*                                                                                       <br>
                    &nbsp;&nbsp;&nbsp;* Prepare to read cells in range [1,2], [2,4]. This will return 6 cells, each      <br>
                    &nbsp;&nbsp;&nbsp;* having a single, <b>float</b> attribute value.                                   <br>
                    &nbsp;&nbsp;&nbsp;*/                                                                                 <br>
                </span>
                &nbsp;&nbsp;<b>double</b> range[4] = {1, 2, 2, 4};                                                       <br>
                &nbsp;&nbsp;<b>float</b> buffer[6];                                                                      <br>
                &nbsp;&nbsp;<b>int</b> buffer_size = 6*<b>sizeof</b>(<b>float</b>);                                          <br>
                &nbsp;&nbsp;<b>const char**</b> attributes = NULL;                                                       <br>
                &nbsp;&nbsp;<b>int</b> attribute_num = 0;                                                                <br>
                                                                                                                         <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Read cells. */                                                                        <br>
                </span>
                &nbsp;&nbsp;tiledb_array_read_dense(                                                                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;tiledb_ctx,                                                                      <br>
                &nbsp;&nbsp;&nbsp;&nbsp;ad,                                                                              <br>
                &nbsp;&nbsp;&nbsp;&nbsp;range,                                                                           <br>
                &nbsp;&nbsp;&nbsp;&nbsp;attributes,                                                                      <br>
                &nbsp;&nbsp;&nbsp;&nbsp;attribute_num,                                                                   <br>
                &nbsp;&nbsp;&nbsp;&nbsp;buffer,                                                                          <br>
                &nbsp;&nbsp;&nbsp;&nbsp;buffer_size);                                                                    <br>
                                                                                                                         <br>
                <span class=code-comment> 
                    &nbsp;&nbsp;/*                                                                                       <br>
                    &nbsp;&nbsp;&nbsp;* Print the a1 value of the cells in [1,2], [2,4]  to stdout.                      <br>
                    &nbsp;&nbsp;&nbsp;* The order of the coordinates is:                                                 <br>
                    &nbsp;&nbsp;&nbsp;* (1,2), (2,2), (1,3), (1,4), (2,3), (2,4).                                        <br>
                    &nbsp;&nbsp;&nbsp;*/                                                                                 <br>
                </span>
                &nbsp;&nbsp;<b>for</b>(<b>int</b> i=0; i<6; ++i)                                                         <br>
                &nbsp;&nbsp;&nbsp;&nbsp;std::cout &lt;&lt; buffer[i] &lt;&lt; "\n";                                      <br>
                                                                                                                         <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Close the array. */                                                                   <br>
                </span>
                &nbsp;&nbsp;tiledb_array_close(tiledb_ctx, ad);                                                          <br>
                                                                                                                         <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Finalize context. */                                          <br>
                </span>
                &nbsp;&nbsp;tiledb_ctx_finalize(tiledb_ctx);                                     <br>
                                                                                                 <br>
                &nbsp;&nbsp;<b>return</b> 0;                                                     <br>
                } 
            </p>
            
            <p>
                Running the above two examples, the output is the following:
            </p>
            
            <p class="console">
                &#36; ./tiledb_array_dense_write <br>
                &#36; ./tiledb_array_dense_read <br>
                0.2<br>
                0.4<br>
                0.5<br>
                0.6<br>
                0.7<br>
                0.8
            </p>

            
            
            <!-- MORE READ/WRITE FUNCTIONS HERE -->
            
            
            
            
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_array_consolidate(                               <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_CTX* tiledb_ctx,                        <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> array);
            </p>
            
            <p class="api-explanation">
                Consolidates the fragments of a TileDB array. Input 
                <span class="code-font">tiledb_ctx</span> is the TileDB context. Input 
                <span class="code-font">array</span> is the name of the array. 
                On success, the function returns <span class="code-font">TILEDB_OK</span>; on failure, it returns 
                <span class="code-font">TILEDB_ERR</span>.
            </p>
            
            <h3>Iterators</h3>
            
            <h3>Misc</h3>
                
            <h2><a name="metadata">Metadata</a></h2>
            
            <h3>Schema</h3>
            
            <p class="api-explanation">
                In order to create a metadata structure, the user must specify its schema. This is done by 
                populating the following struct (see 
                <a href="tiledb_mechanics_101.html" target="tutorial-frame" 
                   onclick='parent.document.getElementById("TileDB-mechanics-101").checked=true;'>
                    TileDB Mechanics 101</a>  
                for more details on how each field should be set according to the user's application scenario).
            </p>
            
            <p class=api-declaration>
                <b>typedef struct</b> TileDB_MetadataSchema {                                                             <br>
                <span class=code-comment> 
                    &nbsp;&nbsp;/*                                                                                       <br>
                    &nbsp;&nbsp;&nbsp;* The metadata name. It is a path to a directory, whose parent is a TileDB         <br>
                    &nbsp;&nbsp;&nbsp;* workspace or a TileDB group or a TileDB array.                                   <br>
                    &nbsp;&nbsp;&nbsp;*/                                                                                 <br>
                </span>
                &nbsp;&nbsp;<b>const char*</b>  metadata_name_;                                                          <br>
                <span class=code-comment>
                    &nbsp;&nbsp;/* The attribute names. */                                                               <br>
                </span>
                &nbsp;&nbsp;<b>const char**</b>  attributes_;                                                            <br>
                <span class=code-comment>
                    &nbsp;&nbsp;/* The number of attributes. */                                                          <br>
                </span>
                &nbsp;&nbsp;<b>int</b>  attribute_num_;                                                                  <br>
                <span class=code-comment> 
                    &nbsp;&nbsp;/*                                                                                       <br>
                    &nbsp;&nbsp;&nbsp;* The type of compression. The supported compression types are <b>NONE</b> and     <br>
                    &nbsp;&nbsp;&nbsp;* <b>GZIP</b>. The number of compression types given should be equal to the        <br>
                    &nbsp;&nbsp;&nbsp;* number of attributes. If it is NULL, <b>NONE</b> is selected as default          <br>
                    &nbsp;&nbsp;&nbsp;* for all attributes.                                                              <br>
                    &nbsp;&nbsp;&nbsp;*/                                                                                 <br>
                </span>
                &nbsp;&nbsp;<b>const char**</b> compression_;                                                            <br>         
                <span class=code-comment> 
                    &nbsp;&nbsp;/* The consolidation step. If it is 0, then it is set to 1 by default. */                <br>
                </span>
                &nbsp;&nbsp;<b>int</b> consolidation_step_;                                                              <br>
                <span class=code-comment> 
                    &nbsp;&nbsp;/*                                                                                       <br>
                    &nbsp;&nbsp;&nbsp;* The attribute types. There should be one type per attribute. The supported types <br>
                    &nbsp;&nbsp;&nbsp;* are <b>char</b>, <b>int32</b>, <b>int64</b>, <b>float32</b>, and <b>float64</b>. 
                                        If the user wishes to have any arbitrary                                         <br>
                    &nbsp;&nbsp;&nbsp;* <b>fixed</b> number N of values for some attribute, <br>
                    &nbsp;&nbsp;&nbsp;* he/she should append <b>:N</b> to the attribute type, e.g., <b>int32:3</b>.      <br>
                    &nbsp;&nbsp;&nbsp;* If the user wishes to have a <b>variable</b> number of values for some attribute,<br>
                    &nbsp;&nbsp;&nbsp;* he/she should append <b>:var</b> to the attribute type, e.g., <b>char:var</b>.   <br>
                    &nbsp;&nbsp;&nbsp;*/                                                                                 <br>
                </span>
                &nbsp;&nbsp;<b>const char**</b> types_;                                                                  <br>
                } TileDB_MetadataSchema;
            </p>
            
            <h3>Create, Rename, Clear, Delete</h3>
            
            <p class="api-declaration">
                TILEDB_EXPORT <b>int</b> tiledb_metadata_create(                                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_MetadataSchema* metadata_schema);
            </p>
            
            <p class="api-explanation">
                Creates a new TileDB metadata structure. Input <span class="code-font">tiledb_ctx</span> 
                is the TileDB context. Input <span class="code-font">metadata_schema</span> is the metadata
                schema. It is assumed that the user has already properly populated the metadata schema struct. 
                On success, the function returns <span class="code-font">TILEDB_OK</span>; 
                on failure, it returns <span class="code-font">TILEDB_ERR</span>.
            </p>
            
            <p>
                The following code exampe shows how to create a TileDB metadata structure. 
            </p>
            
            <p class="code-block">
                <span class="code-comment"> 
                     /*                                                                          <br>
                     &nbsp;* File: <b>tiledb_metadata_create.cc</b>                              <br>
                     &nbsp;*                                                                     <br>
                     &nbsp;* Creating a TileDB metadata structure.                               <br>
                     &nbsp;*/                                                                    <br>
                </span>
                                                                                                  <br>
                <b>#include</b> "tiledb.h"                                                        <br>
                                                                                                  <br>
                <b>int</b> main() {                                                               <br>
                                                                                                  <br>
                &nbsp;&nbsp;<span class="code-comment">/* Initialize context. */</span>          <br>
                &nbsp;&nbsp;TileDB_CTX* tiledb_ctx;                                              <br>
                &nbsp;&nbsp;tiledb_ctx_init(&amp;tiledb_ctx);                                    <br>
                                                                                                  <br>
                <span class=code-comment> 
                    &nbsp;&nbsp;/*                                                                                       <br>
                    &nbsp;&nbsp;&nbsp;* Define the metadata schema struct.                                               <br>
                    &nbsp;&nbsp;&nbsp;* <b>IMPORTANT:</b> Initialize it as empty, so that all numeric members get set    <br>
                    &nbsp;&nbsp;&nbsp;* to 0, and all pointers to NULL. This is vital so that TileDB can set             <br>
                    &nbsp;&nbsp;&nbsp;* default values for the members not set by the user.                              <br>
                    &nbsp;&nbsp;&nbsp;*/                                                                                 <br>
                </span>
                &nbsp;&nbsp;TileDB_MetadataSchema metadata_schema = {};                                                  <br>
                                                                                                  <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Set metadata name to "meta", inside (existing) array "my_workspace/A". */             <br>
                </span>
                &nbsp;&nbsp;metadata_schema.metadata_name_ = "my_workspace/A/meta";                                       <br>
                                                                                                  <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Set attributes and number of attributes. */                   <br>
                </span>
                &nbsp;&nbsp;<b>int</b> attribute_num = 2;                                        <br>
                &nbsp;&nbsp;metadata_schema.attributes_ = <b>new const char*</b>[attribute_num];    <br>
                &nbsp;&nbsp;metadata_schema.attributes_[0] = "a1";                                  <br>
                &nbsp;&nbsp;metadata_schema.attributes_[1] = "a2";                                  <br>
                &nbsp;&nbsp;metadata_schema.attribute_num_ = attribute_num;                         <br>
                                                                                                  <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Set types: <b>int32:3</b> for "a1" and <b>float32:var</b> for "a2". */ <br>
                </span>
                &nbsp;&nbsp;metadata_schema.types_ = <b>new const char*</b>[attribute_num];         <br>
                &nbsp;&nbsp;metadata_schema.types_[0] = "int32:3";                                  <br>
                &nbsp;&nbsp;metadata_schema.types_[1] = "float32:var";                              <br>
                                                                                                  <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/*                                                                                       <br>
                    &nbsp;&nbsp;&nbsp;* <b>NOTE:</b> The rest of the array schema members will be set to default values. <br>
                    &nbsp;&nbsp;&nbsp;* This implies that there will be no compression, and that the consolidation       <br>
                    &nbsp;&nbsp;&nbsp;* step will be set to 1.                                                           <br>
                    &nbsp;&nbsp;&nbsp;*/                                                                                 <br>
                </span>
                                                                                                  <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Create the metadata. */                                       <br>
                </span>
                &nbsp;&nbsp;tiledb_metadata_create(tiledb_ctx, &amp;metadata_schema);            <br>
                                                                                                  <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Finalize context. */                                          <br>
                </span>
                &nbsp;&nbsp;tiledb_ctx_finalize(tiledb_ctx);                                     <br>
                                                                                                  <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Clean up. */                                                  <br>
                </span>
                &nbsp;&nbsp;<b>delete</b> [] metadata_schema.attributes_;                           <br>
                &nbsp;&nbsp;<b>delete</b> [] metadata_schema.types_;                                <br>
                                                                                                  <br>
                &nbsp;&nbsp;<b>return</b> 0;                                                     <br>
                }                                                                                 <br>
            </p>
            
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_metadata_move(                                       <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_CTX* tiledb_ctx,                        <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> old_metadata,                            <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> new_metadata); 
            </p>
            
            <p class="api-explanation">
                Renames an existing TileDB metadata structure. Input <span class="code-font">tiledb_ctx</span> 
                is the TileDB context. Input <span class="code-font">old_metadata</span> 
                is the old metadata name. Input <span class="code-font">new_metadata</span> is the
                new metadata name, which must be a path to a directory whose parent is a TileDB workspace or
                a TileDB group or a TileDB array. On success, the function returns 
                <span class="code-font">TILEDB_OK</span>; on failure, it returns 
                <span class="code-font">TILEDB_ERR</span>.
            </p>    
            
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_metadata_clear(                                      <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_CTX* tiledb_ctx,                        <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> metadata);           
            </p>
            
            <p class="api-explanation">
                Clears an existing TileDB metadata structure, deleting all its data, <b>except</b> its metadata
                schema and directory. Input <span class="code-font">tiledb_ctx</span> is the TileDB 
                context. Input <span class="code-font">metadata</span> is the metadata to be
                cleared. On success, the function returns <span class="code-font">TILEDB_OK</span>; 
                on failure, it returns <span class="code-font">TILEDB_ERR</span>.
            </p>
            
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_metadata_delete(                                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_CTX* tiledb_ctx,                        <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> metadata);
            </p>
            
            <p class="api-explanation">
                Deletes an entire TileDB metadata directory. Input <span class="code-font">tiledb_ctx</span> 
                is the TileDB context. Input <span class="code-font">metadata</span> is the metadata to be deleted. 
                On success, the function returns <span class="code-font">TILEDB_OK</span>; on failure, it returns 
                <span class="code-font">TILEDB_ERR</span>.
            </p>
            
            <h3>Write, Read</h3>
            
            <p>
                Prior to writing to or reading from metadata, the user must open the metadata in the appropriate mode.
                This is realized by function <span class="code-font">tiledb_metadata_open</span> described below,
                which returns a non-negative integer, called <span class="bold-text">metadata descriptor</span>
                (<span class="code-font">md</span>). The supported metadata modes are 
                <span class="code-font">TILEDB_METADATA_MODE_READ</span> for reading, and 
                <span class="code-font">TILEDB_METADATA_MODE_WRITE</span> for writing. All subsequent operations on the 
                metadata take as input this descriptor. After finishing working on an open metadata structure, the user 
                must close it with function <span class="code-font">tiledb_metadata_close</span> declared below.
            </p>
            
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_metadata_open(                                       <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_CTX* tiledb_ctx,                        <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> metadata,                                <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>int</b> mode);
            </p>
            
            <p class="api-explanation">
                Opens a TileDB metadata structure. Input <span class="code-font">tiledb_ctx</span> is the TileDB 
                context. Input <span class="code-font">metadata</span> is the name of the metadata to be
                opened. Input <span class="code-font">mode</span> is the metadata mode, which can be one of
                <span class="code-font">TILEDB_METADATA_MODE_READ</span> or 
                <span class="code-font">TILEDB_METADATA_MODE_WRITE</span>. 
                On success, the function returns a non-negative integer (the metadata descriptor); 
                on failure, it returns <span class="code-font">TILEDB_ERR</span>.
            </p>
            
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_metadata_close(                                   <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_CTX* tiledb_ctx,                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>int</b> md);
            </p>
            
            <p class="api-explanation">
                Closes an open TileDB metadata structure. Input <span class="code-font">tiledb_ctx</span> is the 
                TileDB context. Input <span class="code-font">md</span> is the descriptor of the metadata to be
                closed. On success, the function returns <span class="code-font">TILEDB_OK</span>; on failure, 
                it returns <span class="code-font">TILEDB_ERR</span>.
            </p>
            
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_metadata_write(                                   <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_CTX* tiledb_ctx,                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>int</b> md,                                           <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> key,                                  <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const void*</b> value);
            </p>
            
            <p class="api-explanation">
                Writes an entry to an open TileDB metadata structure. Input <span class="code-font">tiledb_ctx</span> 
                is the TileDB context. Input <span class="code-font">md</span> is the descriptor of the metadata where
                the write will occur. Input <span class="code-font">key</span> is the key of the entry. Input 
                <span class="code-font">value</span> is the value of the entry in binary format (see 
                <a href="tiledb_mechanics_101.html#metadata" target="tutorial-frame" 
                   onclick='parent.document.getElementById("TileDB-mechanics-101").checked=true;'>
                TileDB Mechanics 101</a> for more details on the binary format).
                On success, the function returns <span class="code-font">TILEDB_OK</span>; on failure, 
                it returns <span class="code-font">TILEDB_ERR</span>.
            </p>
            
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_metadata_read(                                    <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_CTX* tiledb_ctx,                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>int</b> md,                                           <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> key,                                  <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char**</b> attributes,                          <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>int</b> attribute_num,                                <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>void*</b> value,                                      <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>int*</b> value_size);
            </p>
            
            <p class="api-explanation">
                Reads an entry from an open TileDB metadata structure. Input <span class="code-font">tiledb_ctx</span> 
                is the TileDB context. Input <span class="code-font">md</span> is the descriptor of the metadata where
                the read will occur. Input <span class="code-font">key</span> is the key of the entry. Input 
                <span class="code-font">attributes</span> is an array with the names of the attributes whose values
                will be retrieved. If this is NULL, then all attributes will be retrieved. Input 
                <span class="code-font">attribute_num</span> is the number of the attributes. Input 
                <span class="code-font">value</span> is a buffer where the function will write the value of the entry
                in binary format (see 
                <a href="tiledb_mechanics_101.html#metadata" target="tutorial-frame" 
                   onclick='parent.document.getElementById("TileDB-mechanics-101").checked=true;'>
                TileDB Mechanics 101</a> for more details on the binary format). Note that this buffer is owned by the
                caller. Input <span class="code-font">value_size</span> is the size of the input buffer. This is used
                by the function to check for potential overflows. Moreover, upon successful termination, the function
                sets it to the number of bytes it wrote to the value buffer. If this is 0, then it means that the metadata
                entry was not found. On success, the function returns <span class="code-font">TILEDB_OK</span>; in case
                writing to the value buffer overflows it returns <span class="code-font">TILEDB_READ_BUFFER_OVERFLOW</span>;
                upon failure, it returns <span class="code-font">TILEDB_ERR</span>.
            </p>
            
            <p class="code-block">
                <span class="code-comment"> 
                     /*                                                                                <br>
                     &nbsp;* File: <b>tiledb_metadata_write.cc</b>                                     <br>
                     &nbsp;*                                                                           <br>
                     &nbsp;* Writing to a TileDB metadata structure.                                   <br>
                     &nbsp;*/                                                                          <br>
                </span>                                                                           
                                                                                                 <br>
                <b>#include</b> "tiledb.h"                                                       <br>
                <b>#include</b> &lt;stdlib.h&gt;                                                 <br>
                <b>#include</b> &lt;string.h&gt;                                                 <br>
                                                                                                 <br>
                <b>int</b> main() {                                                              <br>
                                                                                                 <br>
                &nbsp;&nbsp;<span class="code-comment">/* Initialize context. */</span>          <br>
                &nbsp;&nbsp;TileDB_CTX* tiledb_ctx;                                              <br>
                &nbsp;&nbsp;tiledb_ctx_init(&amp;tiledb_ctx);                                    <br>
                                                                                                 <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Open metadata. */                                             <br>
                </span>
                &nbsp;&nbsp;<b>int</b> md = tiledb_metadata_open(                                       <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                   tiledb_ctx,                                                                   <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                   "my_workspace/A/meta",                                                        <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                   TILEDB_METADATA_MODE_WRITE);                                                  <br>
                                                                                                 <br>
                <span class=code-comment> 
                    &nbsp;&nbsp;/*                                                                                          <br>
                    &nbsp;&nbsp;&nbsp;* Prepare a metadata entry.                                                           <br>
                    &nbsp;&nbsp;&nbsp;* We assume that the metadata has two attributes:                                     <br>
                    &nbsp;&nbsp;&nbsp;* <b>a1</b> that is <b>int32:3</b> and <b>a2</b> that is <b>float32:var</b>.          <br>
                    &nbsp;&nbsp;&nbsp;* We will add the following metadata entry: <b>("stavros", ((1,2,3), (0.1,0.2)))</b>  <br>
                    &nbsp;&nbsp;&nbsp;* See the <b>TileDB Mechanics 101</b> tutorial for detailed information               <br>
                    &nbsp;&nbsp;&nbsp;* on the binary format of the value of a metadata entry.                              <br>
                    &nbsp;&nbsp;&nbsp;*/                                                                                    <br>
                </span>
                &nbsp;&nbsp;<b>const char*</b> key = "stavros";                                                             <br>
                &nbsp;&nbsp;<b>int</b> a1[3] = {1, 2, 3};                                                                   <br>
                &nbsp;&nbsp;<b>float</b> a2[2] = {0.1, 0.2};                                                                <br>
                &nbsp;&nbsp;<b>int</b> value_size = 3*<b>sizeof</b>(<b>int</b>) + 2*<b>sizeof</b>(<b>float</b>) + 
                                                    2*<b>sizeof</b>(<b>int</b>);                                            <br>
                &nbsp;&nbsp;<b>int</b> a2_val_num = 2;                                                                      <br>
                &nbsp;&nbsp;<b>void*</b> value = malloc(value_size);                                                        <br>
                &nbsp;&nbsp;memcpy(value, &amp;value_size, <b>sizeof</b>(<b>int</b>));                                      <br>
                &nbsp;&nbsp;memcpy((<b>char*</b>) value + <b>sizeof</b>(<b>int</b>), a1, 3*<b>sizeof</b>(<b>int</b>));      <br>
                &nbsp;&nbsp;memcpy((<b>char*</b>) value + 4*<b>sizeof</b>(<b>int</b>), 
                                    &amp;a2_val_num, <b>sizeof</b>(<b>int</b>));                                            <br>
                &nbsp;&nbsp;memcpy((<b>char*</b>) value + 5*<b>sizeof</b>(<b>int</b>), a2, 2*<b>sizeof</b>(<b>float</b>));  <br>
                                                                                                                            <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Write to metadata. */                                                                    <br>
                </span>
                &nbsp;&nbsp;tiledb_metadata_write(tiledb_ctx, md, key, value);                                              <br>
                                                                                                                            <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Close metadata. */                                                                       <br>
                </span>
                &nbsp;&nbsp;tiledb_metadata_close(tiledb_ctx, md);                                                          <br>
                                                                                                                            <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Finalize context. */                                                                     <br>
                </span>
                &nbsp;&nbsp;tiledb_ctx_finalize(tiledb_ctx);                                                                <br>
                                                                                                                            <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Clean up. */                                                                             <br>
                </span>
                &nbsp;&nbsp;free(value);                                                                                    <br>
                                                                                                                            <br>
                &nbsp;&nbsp;<b>return</b> 0;                                                                                <br>
                }                                                                                                           <br>
            </p>
            
            <p class="code-block">
                <span class="code-comment"> 
                     /*                                                                          <br>
                     &nbsp;* File: <b>tiledb_metadata_read.cc</b>                                <br>
                     &nbsp;*                                                                     <br>
                     &nbsp;* Reading a TileDB metadata structure. Follows the example of         <br>
                     &nbsp;* <b>tiledb_metadata_write.cc</b>                                     <br>
                     &nbsp;*/                                                                    <br>
                </span>                                                                           
                                                                                                 <br>
                <b>#include</b> "tiledb.h"                                                       <br>
                <b>#include</b> &lt;stdlib.h&gt;                                                 <br>
                <b>#include</b> &lt;iostream&gt;                                                 <br>
                                                                                                 <br>
                <b>int</b> main() {                                                              <br>
                                                                                                 <br>
                &nbsp;&nbsp;<span class="code-comment">/* Initialize context. */</span>          <br>
                &nbsp;&nbsp;TileDB_CTX* tiledb_ctx;                                              <br>
                &nbsp;&nbsp;tiledb_ctx_init(&amp;tiledb_ctx);                                    <br>
                                                                                                 <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Open metadata. */                                             <br>
                </span>
                &nbsp;&nbsp;<b>int</b> md = tiledb_metadata_open(                                       <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                   tiledb_ctx,                                                                   <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                   "my_workspace/A/meta",                                                        <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                   TILEDB_METADATA_MODE_READ);                                                   <br>
                                                                                                 <br>
                <span class=code-comment> 
                    &nbsp;&nbsp;/*                                                                                          <br>
                    &nbsp;&nbsp;&nbsp;* Prepare to read only the first attribute of the entry with key <b>"stavros"</b>.    <br>
                    &nbsp;&nbsp;&nbsp;* The returned value will have a fixed size equal to 3 integers.                      <br>
                    &nbsp;&nbsp;&nbsp;*/                                                                                    <br>
                </span>
                &nbsp;&nbsp;<b>int</b> value_size = 3*<b>sizeof</b>(<b>int</b>);                                            <br>
                &nbsp;&nbsp;<b>void*</b> value = malloc(value_size);                                                        <br>
                &nbsp;&nbsp;<b>int</b> attribute_num = 1;                                                                   <br>
                &nbsp;&nbsp;<b>const char**</b> attributes = <b>new const char*</b>[attribute_num];                         <br>
                &nbsp;&nbsp;attributes[0] = "a1";                                                                           <br>
                                                                                                                            <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Read the entry. */                                                                       <br>
                </span>
                &nbsp;&nbsp;tiledb_metadata_read(                                                                           <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tiledb_ctx,                                                             <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;md,                                                                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"stavros",                                                              <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attributes,                                                             <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attribute_num,                                                          <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value,                                                                  <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;value_size);                                                       <br>
                                                                                                                            <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Print to stdout. */                                                                      <br>
                </span>
                &nbsp;&nbsp;std::cout &lt;&lt; "For key \"stavros\", a1 = ("                                                                <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt; ((<b>int*</b>) value)[0] &lt;&lt; ","      <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt; ((<b>int*</b>) value)[1] &lt;&lt; ","      <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt; ((<b>int*</b>) value)[2] &lt;&lt; ")\n";   <br>
                                                                                                                                            <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Read a non-existing entry with key <b>"stavros papapadopoulos"</b>. */                                   <br>
                </span>
                &nbsp;&nbsp;tiledb_metadata_read(                                                                           <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tiledb_ctx,                                                             <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;md,                                                                     <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"stavros papadopoulos",                                                 <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attributes,                                                             <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attribute_num,                                                          <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value,                                                                  <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;value_size);                                                       <br>
                                                                                                                            <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* The entry does not exist. */                                                             <br>
                </span>
                &nbsp;&nbsp;<b>if</b>(value_size == 0)                                                                      <br>
                &nbsp;&nbsp;&nbsp;&nbsp;std::cout &lt;&lt; "Entry with key \"stavros papadopoulos\" does not exist!\n";     <br>
                                                                                                                            <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Close metadata. */                                                                       <br>
                </span>
                &nbsp;&nbsp;tiledb_metadata_close(tiledb_ctx, md);                                                          <br>
                                                                                                                            <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Finalize context. */                                                                     <br>
                </span>
                &nbsp;&nbsp;tiledb_ctx_finalize(tiledb_ctx);                                                                <br>
                                                                                                                            <br>
                <span class="code-comment">
                    &nbsp;&nbsp;/* Clean up. */                                                                             <br>
                </span>
                &nbsp;&nbsp;<b>delete</b> [] attributes;                                                                    <br>
                &nbsp;&nbsp;free(value);                                                                                    <br>
                                                                                                                            <br>
                &nbsp;&nbsp;<b>return</b> 0;                                                                                <br>
                }                                                                                                           <br>
            </p>
            
            <p>
                Below we run the three example codes for the metadata we provided above, namely we create a metadata
                structure, we write an entry to it, and we read two entries from it.
            </p>
            
            <p class="console">
                &#36; ./tiledb_metadata_create <br>
                &#36; ./tiledb_metadata_write <br>
                &#36; ./tiledb_metadata_read <br>
                For key "stavros", a1 = (1,2,3) <br>
                Entry with key "stavros papadopoulos" does not exist!
            </p>
            
            <p class=api-declaration>
                TILEDB_EXPORT <b>int</b> tiledb_metadata_consolidate(                               <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const</b> TileDB_CTX* tiledb_ctx,                        <br>
                &nbsp;&nbsp;&nbsp;&nbsp;<b>const char*</b> metadata);
            </p>
            
            <p class="api-explanation">
                Consolidates the fragments of a TileDB metadata structure. Input 
                <span class="code-font">tiledb_ctx</span> is the TileDB context. Input 
                <span class="code-font">metadata</span> is the name of the metadata structure. 
                On success, the function returns <span class="code-font">TILEDB_OK</span>; on failure, it returns 
                <span class="code-font">TILEDB_ERR</span>.
            </p>
                
        </div>
        
        <div class="no-wrap"></div>
        
    </body>

</html>